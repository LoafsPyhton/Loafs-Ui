local Loafs = {}
Loafs.Elements = {} -- Store all UI elements

-- Create a Window
function Loafs:MakeWindow(properties)
    -- ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "LoafsUI"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    -- Main Frame
    local window = Instance.new("Frame")
    window.Name = properties.Name or "Window"
    window.Size = UDim2.new(0, 600, 0, 400)
    window.Position = UDim2.new(0.5, -300, 0.5, -200)
    window.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    window.BorderSizePixel = 0
    window.AnchorPoint = Vector2.new(0.5, 0.5)
    window.Parent = screenGui

    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, 30)
    titleBar.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    titleBar.BorderSizePixel = 0
    titleBar.Parent = window

    -- Window Title
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Text = properties.Name or "Loafs Window"
    titleLabel.Size = UDim2.new(1, -30, 1, 0)
    titleLabel.Position = UDim2.new(0, 10, 0, 0)
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.TextSize = 18
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = titleBar

    -- Close Button
    local closeButton = Instance.new("TextButton")
    closeButton.Text = "X"
    closeButton.Size = UDim2.new(0, 30, 1, 0)
    closeButton.Position = UDim2.new(1, -30, 0, 0)
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
    closeButton.BorderSizePixel = 0
    closeButton.Font = Enum.Font.SourceSansBold
    closeButton.TextSize = 18
    closeButton.Parent = titleBar
    closeButton.MouseButton1Click:Connect(function()
        if properties.CloseCallback then
            properties.CloseCallback()
        end
        screenGui:Destroy()
    end)

    -- Tabs Container (Left)
    local tabsContainer = Instance.new("Frame")
    tabsContainer.Name = "TabsContainer"
    tabsContainer.Size = UDim2.new(0, 150, 1, -30)
    tabsContainer.Position = UDim2.new(0, 0, 0, 30)
    tabsContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    tabsContainer.BorderSizePixel = 0
    tabsContainer.Parent = window

    -- Tab Content Frame (Right)
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "ContentFrame"
    contentFrame.Size = UDim2.new(1, -150, 1, -30)
    contentFrame.Position = UDim2.new(0, 150, 0, 30)
    contentFrame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    contentFrame.BorderSizePixel = 0
    contentFrame.Parent = window

    -- Store tabs
    local tabs = {}

    -- Function to add a tab
    function window:MakeTab(tabProperties)
        local tabButton = Instance.new("TextButton")
        tabButton.Text = tabProperties.Name or "Tab"
        tabButton.Size = UDim2.new(1, 0, 0, 30)
        tabButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        tabButton.BorderSizePixel = 0
        tabButton.Font = Enum.Font.SourceSans
        tabButton.TextSize = 16
        tabButton.Parent = tabsContainer

        -- Tab Content
        local tabContent = Instance.new("Frame")
        tabContent.Name = tabProperties.Name or "TabContent"
        tabContent.Size = UDim2.new(1, 0, 1, 0)
        tabContent.BackgroundTransparency = 1
        tabContent.Visible = false
        tabContent.Parent = contentFrame

        local tab = {
            Name = tabProperties.Name,
            Content = tabContent
        }

        -- Tab Button Click
        tabButton.MouseButton1Click:Connect(function()
            for _, otherTab in pairs(tabs) do
                otherTab.Content.Visible = false
            end
            tabContent.Visible = true
        end)

        -- Function to add a button
        function tab:AddButton(buttonProperties)
            local button = Instance.new("TextButton")
            button.Text = buttonProperties.Name or "Button"
            button.Size = UDim2.new(0, 120, 0, 40)
            button.Position = UDim2.new(0, 10, 0, #tabContent:GetChildren() * 50)
            button.BackgroundColor3 = Color3.fromRGB(80, 80, 200)
            button.TextColor3 = Color3.fromRGB(255, 255, 255)
            button.Font = Enum.Font.SourceSans
            button.TextSize = 16
            button.Parent = tabContent

            -- Button Callback
            button.MouseButton1Click:Connect(function()
                if buttonProperties.Callback then
                    buttonProperties.Callback()
                end
            end)

            table.insert(Loafs.Elements, button)
        end

        table.insert(tabs, tab)
        return tab
    end

    -- Store the window in Loafs
    Loafs.Elements.Window = window
    return window
end

return Loafs
